<p align="center">
  <a href="https://fingerprint.com">
    <picture>
     <source media="(prefers-color-scheme: dark)" srcset="https://fingerprintjs.github.io/home/resources/logo_light.svg" />
     <source media="(prefers-color-scheme: light)" srcset="https://fingerprintjs.github.io/home/resources/logo_dark.svg" />
     <img src="https://fingerprintjs.github.io/home/resources/logo_dark.svg" alt="Fingerprint logo" width="312px" />
   </picture>
  </a>
</p>
<p align="center">
  <a href="https://opensource.org/licenses/MIT">
    <img src="https://img.shields.io/:license-mit-blue.svg" alt="MIT license">
  </a>
  <a href="https://discord.gg/39EpE2neBg">
    <img src="https://img.shields.io/discord/852099967190433792?style=logo&label=Discord&logo=Discord&logoColor=white" alt="Discord server">
  </a>
</p>

# Fingerprint Paywall Demo

This is a metered paywall demo built with Fingerprint Pro React, Gatsby, Vercel Serverless Functions, and Supabase. It is useful for newspapers and all content publishers.

## How to Run Locally

1. Install dependencies: `yarn`
2. Start the development server: `yarn start`

The application will be available at [http://localhost:8000](http://localhost:8000).

## How to Build

To build the production-ready version of the project, follow these steps:

1. Install dependencies: `yarn`
2. Build the project: `yarn build`
3. Serve the built project: `yarn gatsby serve`

The built version of the project will be available at [http://localhost:9000](http://localhost:9000).

## Setting Up Supabase

1. Open the Supabase interface.
2. Go to the "SQL" section in the left menu.
3. Execute the following query to create the `article_reads` table:

   ```sql
   create table public.article_reads (
     id bigint generated by default as identity not null,
     visitor_id text null default ''::text,
     article_id bigint null,
     created_at timestamp with time zone null default now(),
     constraint article_reads_pkey primary key (id)
   ) tablespace pg_default;
   ```

4. Execute the following query to create the `distinct_article_reads` view:

   ```sql
    create view public.distinct_article_reads as
      select
        article_reads.visitor_id,
        array_agg(distinct article_reads.article_id) as article_ids
      from
        article_reads
      where
        article_reads.created_at >= (now() - '7 days'::interval)
      group by
        article_reads.visitor_id;
   ```

Once you have executed these queries, the `article_reads` table and `distinct_article_reads` view will be created in your Supabase database.

## Documentation and Support

To dive deeper into Fingerprint Pro, see our [Documentation](https://dev.fingerprint.com/docs). For questions or suggestions specific to this repository, you can [create an issue](https://github.com/fingerprintjs/fingerprintjs-pro-use-cases/issues/new). For general questions and community vibes, visit our [Discord server](https://discord.gg/39EpE2neBg). If you require private support, you can email us at [oss-support@fingerprint.com](mailto:oss-support@fingerprint.com).

## License

This project is licensed under the MIT license. See the [LICENSE](LICENSE) file for more information.
